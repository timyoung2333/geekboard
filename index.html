<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GeekBoard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-badge">GB</div>
          GeekBoard
        </div>
        <button class="settings-btn" id="settingsBtn" title="Settings"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg></button>
      </div>

      <div class="sidebar-section-title" id="projectsToggle">
        <span>Projects</span>
        <span class="section-arrow" id="projectsArrow">‚ñº</span>
      </div>
      <div class="project-list" id="projectList"></div>

      <div class="sidebar-footer">
        <div class="metric-row">
          <span>Completion</span>
          <span id="completionLabel">0%</span>
        </div>
        <div class="metric-bar">
          <div class="metric-bar-fill" id="completionBar" style="transform:scaleX(0);"></div>
        </div>
        <div class="metric-row">
          <span>Tasks</span>
          <span id="taskCountLabel">0</span>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
          <button class="trash-btn" id="trashBtn">üóëÔ∏è Trash <span class="trash-btn-count" id="trashCount">0</span></button>
          <button class="shortcuts-link" id="shortcutsBtn">‚å®Ô∏è Shortcuts</button>
        </div>
        <div class="privacy-hint">
          üîí Data stored locally ¬∑ <a href="https://github.com/timyoung2333/geekboard" target="_blank">‚≠ê Star on GitHub</a>
        </div>
      </div>
    </aside>

    <div class="resizer" id="sidebarResizer"><div class="resizer-line"></div></div>

    <main class="main">
      <div class="scanline"></div>
      <header class="topbar">
        <div class="project-title">
          <span id="activeProjectName">No Project</span>
          <span id="projectStats"></span>
        </div>
        <div class="spacer"></div>
        <div class="search-box">
          <input id="searchInput" placeholder="Search tasks (title / desc / tags)" />
        </div>
        <button class="btn" id="calendarBtn">üìÖ Calendar</button>
      </header>

      <section class="kanban" id="kanbanView">
        <div class="column" data-status="backlog">
          <div class="column-header">
            <div class="column-title">
              Backlog
              <button class="add-task-btn" id="newTaskBtn" title="New Task [n]">Ôºã</button>
            </div>
            <div class="column-count" data-count-for="backlog">0</div>
          </div>
          <div class="task-list" data-list-for="backlog"></div>
        </div>
        <div class="column-resizer" data-resizer="0"><div class="column-resizer-line"></div></div>
        <div class="column" data-status="in_progress">
          <div class="column-header">
            <div class="column-title">
              In&nbsp;Progress
            </div>
            <div class="column-count" data-count-for="in_progress">0</div>
          </div>
          <div class="task-list" data-list-for="in_progress"></div>
        </div>
        <div class="column-resizer" data-resizer="1"><div class="column-resizer-line"></div></div>
        <div class="column" data-status="done">
          <div class="column-header">
            <div class="column-title">
              Done
            </div>
            <div class="column-count" data-count-for="done">0</div>
          </div>
          <div class="task-list" data-list-for="done"></div>
        </div>
      </section>

      <!-- Calendar View -->
      <section class="calendar-view hidden" id="calendarView">
        <div class="calendar-view-header">
          <div class="calendar-view-nav">
            <button class="calendar-view-nav-btn" id="calViewPrevBtn">‚óÄ</button>
            <span class="calendar-view-month" id="calViewMonthLabel">January 2025</span>
            <button class="calendar-view-nav-btn" id="calViewNextBtn">‚ñ∂</button>
          </div>
          <button class="calendar-view-today-btn" id="calViewTodayBtn">Today</button>
        </div>
        <div class="calendar-view-content">
          <div class="calendar-view-grid-container">
            <div class="calendar-view-grid" id="calViewGrid"></div>
            <div class="calendar-view-legend">
              <div class="calendar-view-legend-item">
                <div class="calendar-view-legend-dot" style="background: var(--danger);"></div>
                <span>High Priority</span>
              </div>
              <div class="calendar-view-legend-item">
                <div class="calendar-view-legend-dot" style="background: #fbbf24;"></div>
                <span>Medium</span>
              </div>
              <div class="calendar-view-legend-item">
                <div class="calendar-view-legend-dot" style="background: #60a5fa;"></div>
                <span>Low</span>
              </div>
            </div>
          </div>
          <div class="calendar-day-detail empty" id="calDayDetail">
            <span>Select a day to view tasks</span>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop hidden" id="modalBackdrop"></div>
  <div class="modal hidden" id="taskModal">
    <div class="modal-panel">
      <div class="modal-header">
        <div>Task Editor <span id="modalModeLabel">¬∑ new</span></div>
        <button class="btn btn-ghost" id="closeModalBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="field">
          <div class="field-label">Title</div>
          <input class="input" id="taskTitleInput" placeholder="e.g. Automate experiment scripts / Write paper method section" />
        </div>
        <div class="field">
          <div class="field-label">Description</div>
          <textarea class="textarea" id="taskDescInput" placeholder="Add details, links, commands, sub-tasks, etc."></textarea>
        </div>
        <div class="field">
          <div class="field-label">Priority</div>
          <select class="select" id="taskPrioritySelect">
            <option value="medium">Medium (default)</option>
            <option value="high">High</option>
            <option value="low">Low</option>
          </select>
        </div>
        <div class="field">
          <div class="field-label">Tags (comma separated)</div>
          <input class="input" id="taskTagsInput" placeholder="e.g. research, impl, reading" />
        </div>
        <div class="field">
          <div class="field-label">Deadline</div>
          <input class="input" type="date" id="taskDeadlineInput" />
        </div>
      </div>
      <div class="modal-footer">
        <div>Created: <span id="taskCreatedAtLabel">now</span></div>
        <div class="btn-group">
          <button class="btn btn-danger hidden" id="deleteTaskBtn">Delete</button>
          <button class="btn btn-primary" id="saveTaskBtn">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Shortcuts Modal -->
  <div class="modal hidden" id="shortcutsModal">
    <div class="modal-panel" style="width: 320px;">
      <div class="modal-header">
        <div>Keyboard Shortcuts</div>
        <button class="btn btn-ghost" id="closeShortcutsBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="shortcuts-list">
          <div class="shortcut-row">
            <span class="shortcut-desc">New task</span>
            <span class="shortcut-key">N</span>
          </div>
          <div class="shortcut-row">
            <span class="shortcut-desc">New project</span>
            <span class="shortcut-key">P</span>
          </div>
          <div class="shortcut-row">
            <span class="shortcut-desc">Search</span>
            <span class="shortcut-key">/</span>
          </div>
          <div class="shortcut-row">
            <span class="shortcut-desc">Save task (in modal)</span>
            <span class="shortcut-key">‚åò/Ctrl + Enter</span>
          </div>
          <div class="shortcut-row">
            <span class="shortcut-desc">Close modal</span>
            <span class="shortcut-key">Esc</span>
          </div>
          <div class="shortcut-row">
            <span class="shortcut-desc">Change task status</span>
            <span class="shortcut-key">Drag & Drop</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Trash Modal -->
  <div class="modal hidden" id="trashModal">
    <div class="modal-panel" style="width: 380px;">
      <div class="modal-header">
        <div>üóëÔ∏è Trash</div>
        <div class="btn-group">
          <button class="btn btn-danger" id="emptyTrashBtn" style="font-size: 10px; padding: 4px 8px;">Empty</button>
          <button class="btn btn-ghost" id="closeTrashBtn">‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="trash-modal-list" id="trashModalList"></div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal hidden" id="settingsModal">
    <div class="modal-panel" style="width: 320px;">
      <div class="modal-header">
        <div>‚öôÔ∏è Settings</div>
        <button class="btn btn-ghost" id="closeSettingsBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <div class="settings-section-title">Appearance</div>
          <div class="settings-option">
            <div>
              <div class="settings-option-label">Theme</div>
              <div class="settings-option-desc">Choose dark or light mode</div>
            </div>
            <div class="theme-switcher">
              <button class="theme-btn theme-btn-dark active" id="themeDarkBtn" title="Dark"></button>
              <button class="theme-btn theme-btn-light" id="themeLightBtn" title="Light"></button>
            </div>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Layout</div>
          <div class="settings-option">
            <div>
              <div class="settings-option-label">Reset Layout</div>
              <div class="settings-option-desc">Restore default panel sizes</div>
            </div>
            <button class="btn" id="resetLayoutBtn" style="font-size: 11px; padding: 4px 10px;">Reset</button>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Privacy</div>
          <div class="privacy-notice">
            <div class="privacy-notice-icon">üîí</div>
            <div class="privacy-notice-text">
              <strong>Your data stays on your device</strong><br>
              All projects and tasks are stored in your browser's localStorage. Nothing is sent to any server. We cannot see or access your data.
            </div>
          </div>
          <div class="verify-section">
            <div class="verify-title">üí° Verify it yourself:</div>
            <div class="verify-steps">
              <div class="verify-step">
                <span class="verify-step-num">1</span>
                <span><strong>Offline test:</strong> Turn off WiFi ‚Üí Refresh page ‚Üí Still works!</span>
              </div>
              <div class="verify-step">
                <span class="verify-step-num">2</span>
                <span><strong>Network check:</strong> Press F12 ‚Üí Network tab ‚Üí Use the app as normal ‚Üí No requests sent</span>
              </div>
              <div class="verify-step">
                <span class="verify-step-num">3</span>
                <span><strong>See your data:</strong> Press F12 ‚Üí Application ‚Üí Local Storage ‚Üí All data is there</span>
              </div>
            </div>
          </div>
        </div>
        <div class="settings-section" style="border-top: 1px solid var(--border); padding-top: 12px;">
          <a href="https://github.com/timyoung2333/geekboard" target="_blank" class="github-link">
            ‚≠ê Star on GitHub
          </a>
          <div style="font-size: 10px; color: var(--text-dim); margin-top: 4px;">
            Open source ¬∑ View code ¬∑ Report issues
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New Project Modal -->
  <div class="modal hidden" id="newProjectModal">
    <div class="modal-panel" style="width: 320px;">
      <div class="modal-header">
        <div>Ôºã New Project</div>
        <button class="btn btn-ghost" id="closeNewProjectBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="field-group">
          <div class="field-label">Project Name</div>
          <input class="input" id="newProjectNameInput" placeholder="Enter project name..." />
        </div>
        <div class="field-group" style="margin-top: 12px;">
          <div class="field-label">Group (optional)</div>
          <select class="select" id="newProjectGroupSelect">
            <option value="">‚Äî No group ‚Äî</option>
          </select>
        </div>
        <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end;">
          <button class="btn btn-ghost" id="cancelNewProjectBtn">Cancel</button>
          <button class="btn btn-primary" id="saveNewProjectBtn">Create</button>
        </div>
      </div>
    </div>
  </div>

  <!-- New Group Modal -->
  <div class="modal hidden" id="newGroupModal">
    <div class="modal-panel" style="width: 280px;">
      <div class="modal-header">
        <div>üìÅ New Group</div>
        <button class="btn btn-ghost" id="closeNewGroupBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="field-group">
          <div class="field-label">Group Name</div>
          <input class="input" id="newGroupNameInput" placeholder="Enter group name..." />
        </div>
        <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end;">
          <button class="btn btn-ghost" id="cancelNewGroupBtn">Cancel</button>
          <button class="btn btn-primary" id="saveNewGroupBtn">Create</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Rename Project Modal -->
  <div class="modal hidden" id="renameProjectModal">
    <div class="modal-panel" style="width: 280px;">
      <div class="modal-header">
        <div>‚úèÔ∏è Rename Project</div>
        <button class="btn btn-ghost" id="closeRenameProjectBtn">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="field-group">
          <div class="field-label">Project Name</div>
          <input class="input" id="renameProjectInput" placeholder="Enter project name..." />
        </div>
        <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end;">
          <button class="btn btn-ghost" id="cancelRenameProjectBtn">Cancel</button>
          <button class="btn btn-primary" id="saveRenameProjectBtn">Save</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>